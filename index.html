<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Søften Tagrenovering Beregner</title>
    <script src="https://unpkg.com/hyperscript.org@0.9.12"></script>
    <script src="https://unpkg.com/htmx.org@1.9.7"></script>
    <link rel="stylesheet" href="/style.css" />

    <script>
      function calculatePrice() {
        console.log("calculating price....");
        return "20,570.00 DKK";
      }
    </script>
  </head>
  <body>
    <div class="py-32 container mx-auto">
      <div class="p-8 bg-gray-100 rounded border border-gray-200">
        <form
          class="grid gap-4 max-w-prose"
          _="on submit halt the event
          if value of #landsdel then
            put the text of #landsdel.options[#landsdel.selectedIndex] into #landsdelResult

            if my.querySelector('.error.hidden') then
              toggle .hidden on me
              remove .hidden from the next <form/>
              add .grid to the next <form/>
            end
          else
            put '' into #landsdelResult
            remove .hidden from .error in me
            put 'Dette felt skal udfyldes' into .error in me
          end"
        >
          <h2 class="text-2xl font-semibold tracking-wide">Landsdel</h2>

          <select
            id="landsdel"
            class="px-4 py-2 rounded border border-gray-200"
            _="on input add .hidden to .error in my.closest('form')"
          >
            <option value="">Vælg landsdel</option>
            <option value="1">Nordjylland</option>
            <option value="2">Midtjylland</option>
            <option value="3">Syddanmark</option>
            <option value="4">Sjælland</option>
            <option value="5">Hovedstaden</option>
          </select>

          <p class="error hidden text-red-500"></p>

          <p class="text-gray-500">
            Der er indregnet et tillæg på arbejde på Sjælland pga. transport og
            evt. bolig til vores folk som alle er fra Jylland.
          </p>

          <div class="flex gap-2">
            <button
              class="px-4 py-2 rounded bg-white border border-gray-200"
              type="submit"
            >
              Næste
            </button>
          </div>
        </form>

        <form
          class="hidden gap-4 max-w-prose"
          _="on submit halt the event
          if value of #tagtype then
            put the text of #tagtype.options[#tagtype.selectedIndex] into #tagtypeResult
            
            if my.querySelector('.error.hidden') then
              toggle .hidden on me
              remove .hidden from the next <form/>
              add .grid to the next <form/>
            end
          else
            put '' into #tagtypeResult
            remove .hidden from .error in me
            put 'Dette felt skal udfyldes' into .error in me
          end"
        >
          <h2 class="text-2xl font-semibold tracking-wide">Nuværende tag</h2>

          <select
            id="tagtype"
            class="px-4 py-2 rounded border border-gray-200"
            _="on input add .hidden to .error in my.closest('form')"
          >
            <option value="">Vælg nuværende tag</option>
            <option value="1">Bølgetag/eternit</option>
            <option value="2">Skifer</option>
            <option value="3">Teglsten/betonsten</option>
          </select>

          <p class="error hidden text-red-500"></p>

          <p class="text-gray-500">
            Er dit nuværende tag f.eks bølge eller skiffer eternit?
          </p>

          <div class="flex gap-2">
            <button
              class="px-4 py-2 rounded bg-white border border-gray-200"
              type="button"
              _="on click toggle .hidden on my.closest('form') then toggle .hidden on my.closest('form').previousElementSibling"
            >
              Forrige
            </button>

            <button
              class="px-4 py-2 rounded bg-white border border-gray-200"
              type="submit"
            >
              Næste
            </button>
          </div>
        </form>

        <form
          class="hidden gap-4 max-w-prose"
          _="on submit halt the event
          if value of #grundplan then
            put the value of #grundplan into #grundplanResult
            
            if my.querySelector('.error.hidden') then
              toggle .hidden on me
              remove .hidden from the next <form/>
              add .grid to the next <form/>
            end
          else
            put '' into #grundplanResult
            remove .hidden from .error in me
            put 'Dette felt skal udfyldes.' into .error in me
          end"
        >
          <h2 class="text-2xl font-semibold tracking-wide">Grundplan</h2>

          <input
            id="grundplan"
            class="px-4 py-2 rounded border border-gray-200"
            type="number"
            _="on input add .hidden to .error in my.closest('form')"
          />

          <p class="error hidden text-red-500"></p>

          <p class="text-gray-500">
            Boligareal + evt. m2 under tag (f.eks. 110 m2 bolig + 30 m2
            overdækket terrasse = 130 m2). Der laves en udregning ud fra m2 på
            selve grundplanen af boligen - dvs. er huset 100 m2 i grundplan
            tastes der 100 ind herover.
          </p>

          <div class="flex gap-2">
            <button
              class="px-4 py-2 rounded bg-white border border-gray-200"
              type="button"
              _="on click toggle .hidden on my.closest('form') then toggle .hidden on my.closest('form').previousElementSibling"
            >
              Forrige
            </button>

            <button
              class="px-4 py-2 rounded bg-white border border-gray-200"
              type="submit"
            >
              Næste
            </button>
          </div>
        </form>

        <form
          class="hidden gap-4 max-w-prose"
          _="on submit halt the event
          if value of #hustype then
            put the text of #hustype.options[#hustype.selectedIndex] into #hustypeResult
            
            if my.querySelector('.error.hidden') then
              toggle .hidden on me
              remove .hidden from the next <form/>
              add .grid to the next <form/>
            end
          else
            put '' into #hustypeResult
            remove .hidden from .error in me
            put 'Dette felt skal udfyldes.' into .error in me
          end"
        >
          <h2 class="text-2xl font-semibold tracking-wide">Hustype</h2>

          <select
            id="hustype"
            class="px-4 py-2 rounded border border-gray-200"
            _="on input add .hidden to .error in my.closest('form')"
          >
            <option value="">Vælg hustype</option>
            <option value="1">Længehus</option>
            <option value="2">Vinkelhus</option>
          </select>

          <p class="error hidden text-red-500"></p>

          <p class="text-gray-500">
            Er huset et længehus (med 2 sider) eller et vinkelhus (med
            skotrender og/eller valme)?
          </p>

          <div class="flex gap-2">
            <button
              class="px-4 py-2 rounded bg-white border border-gray-200"
              type="button"
              _="on click toggle .hidden on my.closest('form') then toggle .hidden on my.closest('form').previousElementSibling"
            >
              Forrige
            </button>

            <button
              class="px-4 py-2 rounded bg-white border border-gray-200"
              type="submit"
            >
              Næste
            </button>
          </div>
        </form>

        <form
          class="hidden gap-4 max-w-prose"
          _="on submit halt the event
          if value of #taghaeldning then
            put the text of #taghaeldning.options[#taghaeldning.selectedIndex] into #taghaeldningResult
            
            if my.querySelector('.error.hidden') then
              toggle .hidden on me
              remove .hidden from the next <form/>
              add .grid to the next <form/>
            end
          else
            put '' into #taghaeldningResult
            remove .hidden from .error in me
            put 'Dette felt skal udfyldes.' into .error in me
          end"
        >
          <h2 class="text-2xl font-semibold tracking-wide">Taghældning</h2>

          <select
            id="taghaeldning"
            class="px-4 py-2 rounded border border-gray-200"
            _="on input add .hidden to .error in my.closest('form')"
          >
            <option value="">Vælg taghældning</option>
            <option value="1">Lav (1-plans hus)</option>
            <option value="2">Høj (2-plans hus)</option>
          </select>

          <p class="error hidden text-red-500"></p>

          <p class="text-gray-500">Er dit hus med høj eller lav rejsning?</p>

          <div class="flex gap-2">
            <button
              class="px-4 py-2 rounded bg-white border border-gray-200"
              type="button"
              _="on click toggle .hidden on my.closest('form') then toggle .hidden on my.closest('form').previousElementSibling"
            >
              Forrige
            </button>

            <button
              class="px-4 py-2 rounded bg-white border border-gray-200"
              type="submit"
            >
              Næste
            </button>
          </div>
        </form>

        <form
          class="hidden gap-4 max-w-prose"
          _="on submit halt the event
          if value of #tagbelaegning then
            put the text of #tagbelaegning.options[#tagbelaegning.selectedIndex] into #tagbelaegningResult

            if #eksisterendeTag matches .hidden then
              put 'Valg ikke nødvendigt' into #eksisterendeTagResult
            else
              if the textContent of #eksisterendeTag.querySelector('input:checked + label') then
                put the textContent of #eksisterendeTag.querySelector('input:checked + label') into #eksisterendeTagResult
              else
                put 'Eksisterende tag skal udfyldes.' into .error
                remove .hidden from .error in me
              end
            end

            if my.querySelector('.error.hidden') then
              toggle .hidden on me
              remove .hidden from the next <form/>
              add .grid to the next <form/>
              send calculatePrice to the next <form/>
            end
          else
            put '' into #tagbelaegningResult
            remove .hidden from .error in me
            put 'Dette felt skal udfyldes.' into .error in me
          end"
        >
          <h2 class="text-2xl font-semibold tracking-wide">
            Ønsket tagbelægning
          </h2>

          <select
            id="tagbelaegning"
            class="px-4 py-2 rounded border border-gray-200"
            _="on change
            add .hidden to .error in my.closest('form')

            if ['1', '2', '3'].includes(the value of me) then
              remove .hidden from #eksisterendeTag
            else
              add .hidden to #eksisterendeTag
            end"
          >
            <option value="">Vælg ønsket tagbelægning</option>
            <option value="1">AeroDek Tradition/Metrotile Quartz</option>
            <option value="2">AeroDek Uniq/Metrotile Prestige</option>
            <option value="3">AeroDek Quadro</option>
            <option value="4">Bølge eternit</option>
            <option value="5">Skifer eternit</option>
            <option value="6">Tegl, vingesten</option>
            <option value="7">Tegl, engoberet vingesten</option>
            <option value="8">Tegl, fals</option>
            <option value="9">Betonsten</option>
            <option value="10">Rensning og maling</option>
          </select>

          <div id="eksisterendeTag" role="radio-group" class="hidden">
            <h3 class="text-lg font-medium">Eksisterende tag</h3>

            <input
              type="radio"
              id="option1"
              name="tag"
              value="option1"
              _="on input add .hidden to .error in my.closest('form')"
            />
            <label for="option1">
              Eksisterende tag skal af og undertag skal etableres
            </label>

            <br />

            <input
              type="radio"
              id="option2"
              name="tag"
              value="option2"
              _="on input add .hidden to .error in my.closest('form')"
            />
            <label for="option2"
              >Taget skal lægges ovenpå eksisterende tag</label
            >
          </div>

          <p class="error hidden text-red-500"></p>

          <p class="text-gray-500">Vælg den belægning du går og drømmer om.</p>

          <div class="flex gap-2">
            <button
              class="px-4 py-2 rounded bg-white border border-gray-200"
              type="button"
              _="on click toggle .hidden on my.closest('form') then toggle .hidden on my.closest('form').previousElementSibling"
            >
              Forrige
            </button>

            <button
              class="px-4 py-2 rounded bg-white border border-gray-200"
              type="submit"
            >
              Næste
            </button>
          </div>
        </form>

        <form
          class="hidden gap-4 max-w-prose"
          hx-post="/result"
          _="on calculatePrice call calculatePrice() put the result into .prisResult"
        >
          <div class="space-y-1">
            <h2 class="text-2xl font-semibold tracking-wide">Din pris</h2>
            <p class="prisResult text-5xl font-bold"></p>
            <p class="text-gray-500">
              Prisen er inkl. moms. Ved evt. kviste, Velux/ovenlys-vinduer skal
              man forvente en merpris.
            </p>
          </div>

          <h2 class="text-2xl font-semibold tracking-wide">
            Dine indtastede oplysninger
          </h2>

          <div class="space-y-1">
            <h3 class="text-lg font-medium">Din beliggenhed</h3>
            <p id="landsdelResult"></p>
          </div>

          <div class="space-y-1">
            <h3 class="text-lg font-medium">Nuværende tag</h3>
            <p id="tagtypeResult"></p>
          </div>

          <div class="space-y-1">
            <h3 class="text-lg font-medium">Grundplan</h3>
            <p id="grundplanResult"></p>
          </div>

          <div class="space-y-1">
            <h3 class="text-lg font-medium">Hustype</h3>
            <p id="hustypeResult"></p>
          </div>

          <div class="space-y-1">
            <h3 class="text-lg font-medium">Taghældning</h3>
            <p id="taghaeldningResult"></p>
          </div>

          <div class="space-y-1">
            <h3 class="text-lg font-medium">Ønsket tagbelægning</h3>
            <p id="tagbelaegningResult"></p>
          </div>

          <div class="space-y-1">
            <h3 class="text-lg font-medium">Eksisterende tag</h3>
            <p id="eksisterendeTagResult"></p>
          </div>

          <div class="space-y-1">
            <h3 class="text-lg font-medium">Pris</h3>
            <p class="prisResult"></p>
          </div>

          <div class="flex gap-2">
            <button
              class="px-4 py-2 rounded bg-white border border-gray-200"
              type="button"
              _="on click toggle .hidden on my.closest('form') then toggle .hidden on my.closest('form').previousElementSibling"
            >
              Forrige
            </button>

            <button
              class="px-4 py-2 rounded bg-white border border-gray-200"
              type="submit"
            >
              Book aftale
            </button>
          </div>
        </form>
      </div>
    </div>
  </body>
</html>
